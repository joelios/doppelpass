{% extends "templates/web.html" %}
{% block page_content %}
<div id="carouselExampleIndicators" class="carousel slide w-100" style="min-height: 100vh !important; background-color: {{ primar_bg }};" data-interval="false">
	<!-- indikatoren -->
	<ol class="carousel-indicators">
		<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="5"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="6"></li>
		<li data-target="#carouselExampleIndicators" data-slide-to="7"></li>
	</ol>
	<div class="carousel-inner" style="color: {{ schriftfarbe or 'white' }};">
		<!-- 1. Hauptmenue -->
		<div class="carousel-item active">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" style="margin-top: 5vh; margin-bottom: 2vh;" onclick="$('.carousel').carousel(0);">
			{% if event %}
				<div class="row" style="padding-left: 10vw; padding-right: 10vw;">
					<div class="col"><center><b>Demnächst</b></center></div>
				</div>
				<div class="row" style="margin-bottom: 10vh; padding-left: 10vw; padding-right: 10vw;">
					<div class="col" style="background-color: {{ sekundaer_bg }}; border: 5px solid {% if event.typ == 'Match' %}#FFD700{% else %}#bbbbbb{% endif %}; border-radius: 25px;">
						<div class="row">
							<div class="col-10">
								<i class="far fa-calendar-alt"></i> {{ _(frappe.utils.get_datetime(event.start).strftime('%A')) }} {{ frappe.utils.get_datetime(event.start).strftime('%d') }} {{ _(frappe.utils.get_datetime(event.start).strftime('%B')) }} um {{ frappe.utils.get_datetime(event.start).strftime('%H:%M') }}<br>
							</div>
							<div class="col-2">
								{{ anzahl }}
							</div>
							<div class="col-8">
								<strong>{{ event.typ }} <i class="far fa-address-book" onclick="show_teilnehmer('{{ event.name }}');"></i></strong><br>
								<i class="fas fa-map-marker-alt"></i> {{ event.ort }}
							</div>
							<div class="col-4">
								{% if frappe.utils.get_datetime(frappe.utils.now()).strftime('%d.%m.%Y') != frappe.utils.get_datetime(event.start).strftime('%d.%m.%Y') %}
									<div class="row" style="font-size: 30px;">
										<div class="col-6" {% if anwesend %}style="color: green;"{% else %}style="cursor: pointer;" onclick="anmelden('{{ event.name }}');"{% endif %}>
											<i class="far fa-check-circle"></i>
										</div>
										<div class="col-6" {% if not anwesend %}style="color: red;"{% else %}style="cursor: pointer;" onclick="abmelden('{{ anwesend }}');"{% endif %}>
											<i class="far fa-times-circle"></i>
										</div>
									</div>
								{% else %}
									<div class="row" style="font-size: 30px;">
										<div class="col-6" {% if anwesend %}style="color: green;"{% else %}style="cursor: pointer;"{% endif %}>
											<i class="far fa-check-circle"></i>
										</div>
										<div class="col-6" {% if not anwesend %}style="color: red;"{% else %}style="cursor: pointer;"{% endif %}>
											<i class="far fa-times-circle"></i>
										</div>
									</div>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			{% endif %}
			<div class="row" style="margin-bottom: 5vh;">
				<div class="col">
					<center><i class="far fa-calendar-alt" style="font-size: 60px;" onclick="$('.carousel').carousel(2);"></i><br>Kalender</center>
				</div>
				<div class="col">
					<center><i class="fas fa-users" style="font-size: 60px;" onclick="$('.carousel').carousel(6);"></i><br>Team</center>
				</div>
				<div class="col">
					<center><i class="fas fa-user-circle" style="font-size: 60px;" onclick="$('.carousel').carousel(7);"></i><br>Profil</center>
				</div>
			</div>
			<div class="row" style="margin-bottom: 5vh;">
				<div class="col">
					<center><i class="fas fa-percentage" style="font-size: 60px;" onclick="$('.carousel').carousel(3);"></i><br>Präsenz</center>
				</div>
				<div class="col">
					<center><i class="fas fa-list-ol" style="font-size: 60px;" onclick="$('.carousel').carousel(4);"></i><br>Topscorer</center>
				</div>
				<div class="col">
					<center><i class="fas fa-piggy-bank" style="font-size: 60px;" onclick="$('.carousel').carousel(5);"></i><br>Kasse</center>
				</div>
			</div>
			<div class="row">
				<div class="col"></div>
				<div class="col">
					<center><img src="assets/doppelpass/images/swissunihockey.png" onclick="$('.carousel').carousel(1);"><br>Spielbetrieb</center>
				</div>
				<div class="col"></div>
			</div>
		</div>
		<!-- 2. Spielbetrieb -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<!-- Nav tabs -->
			<ul class="nav nav-tabs" style="color: {{ schriftfarbe or 'white' }};" >
				<li class="nav-item">
					<a class="nav-link active" data-toggle="tab" href="#tabelle">Tabelle</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" data-toggle="tab" href="#resultate">Resultate</a>
				</li>
			</ul>
			<!-- Tab panes -->
			<div class="tab-content">
				<div class="tab-pane container active" id="tabelle" style="padding-left: 0px; padding-right: 0px;">
					<p>{{ tabelle["data"]["title"] }}</p>
					{% if tabelle["data"]["regions"][0]['rows'] %}
					<table class="table table-striped" style="text-align: center; font-size: 12px; color: {{ schriftfarbe or 'white' }};" id="tabelle">
						<thead>
							<tr>
								<th>Rg.</th>
								<th>Team</th>
								<th>gSp</th>
								<th>SoW</th>
								<th>TD</th>
								<th>PQ</th>
							</tr>
						</thead>
						<tbody>
							{% for ranking in tabelle["data"]["regions"][0]["rows"] %}
							<tr>
								<td>{{ ranking["data"]["rank"] }} </td>
								<td><img src="{{ ranking["cells"][1]["image"]["url"] }}" width="25"></td>
								<td>{{ ranking["cells"][4]["text"][0] }}</td>
								<td>{{ ranking["cells"][5]["text"][0] }}</td>
								<td>{{ ranking["cells"][11]["text"][0] }}</td>
								<td>{{ ranking["cells"][12]["text"][0] }}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% else %}
					<p>Die Tabelle von Swissunihockey ist noch nicht über die API abrufbar.</p>
					{% endif %}
				</div>
				<div class="tab-pane container fade" id="resultate" style="padding-left: 0px; padding-right: 0px; margin-bottom: 70px;">
					<a href="https://api-v2.swissunihockey.ch/api/calendars?season={{ season }}&league={{ league }}&game_class={{ game_class }}&group={{ group }}" style="color: {{ schriftfarbe or 'white' }};">
						<i class="fas fa-download"></i> Alle Spiele als iCalendar-Datei downloaden
					</a>
					<table class="table table-striped" style="text-align: center; font-size: 12px; color: {{ schriftfarbe or 'white' }};" id="tabelle">
						<thead>
							<tr>
								<th>Datum</th>
								<th>Heim</th>
								<th>Gast</th>
								<th>Result.</th>
							</tr>
						</thead>
						<tbody>
							{% for ranking in resultate["data"]["regions"][0]["rows"] %}
							<tr>
							<td>{{ ranking["cells"][0]["text"][0] }}<br>{{ ranking["cells"][0]["text"][1] }}</td>
							<td>{{ ranking["cells"][2]["text"][0] }}</td>
							<td>{{ ranking["cells"][3]["text"][0] }}</td>
							<td>{{ ranking["cells"][4]["text"][0] }}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<!-- 3. Kalender -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<div class="row" style="margin-bottom: 10vh;">
				{% for event in events_in_zukunft %}
					{% set vars = {'details_zu_events_': event.name} %}
					<div class="col-1"></div>
					<div class="col-10" style="background-color: {{ sekundaer_bg }}; border: 5px solid {% if event.typ == 'Match' %}#FFD700{% else %}#bbbbbb{% endif %}; border-radius: 25px; padding: 3px; margin-bottom: 5px;">
						<div class="row" style="padding-left: 10px; padding-right: 10px; padding-top: 5px; padding-bottom: 5px;">
							<div class="col-10">
								<i class="far fa-calendar-alt"></i> {{ _(frappe.utils.get_datetime(event.start).strftime('%A')) }} {{ frappe.utils.get_datetime(event.start).strftime('%d') }} {{ _(frappe.utils.get_datetime(event.start).strftime('%B')) }} um {{ frappe.utils.get_datetime(event.start).strftime('%H:%M') }}
							</div>
							<div class="col-2" style="text-align: right; color: #FFD700;">
								{{ details_zu_events[vars.details_zu_events_].anzahl }}
							</div>
							<div class="col-8" style="word-wrap: break-word;">
								<strong>{% if event.typ == 'Match' %}{{ event.gegner }}{% else %}{{ event.typ }}{% endif %} <i class="far fa-address-book" onclick="show_teilnehmer('{{ event.name }}');"></i></strong><br>
								{% if event.details %}{{ event.details }}<br>{% endif %}
								<i class="fas fa-map-marker-alt"></i> {{ event.ort }}
							</div>
							<div class="col-3">
								<div class="row" style="font-size: 30px;">
									<div class="col-6" {% if details_zu_events[vars.details_zu_events_].anwesend %}style="color: green;"{% else %}style="cursor: pointer;" onclick="anmelden('{{ event.name }}');"{% endif %}>
										<i class="far fa-check-circle"></i>
									</div>
									<div class="col-6" {% if not details_zu_events[vars.details_zu_events_].anwesend %}style="color: red;"{% else %}style="cursor: pointer;" onclick="abmelden('{{ details_zu_events[vars.details_zu_events_].anwesend }}');"{% endif %}>
										<i class="far fa-times-circle"></i>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-1"></div>
				{% endfor %}
			</div>
		</div>
		<!-- 4. Präsenz -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<table class="table table-striped" style="color: {{ schriftfarbe or 'white' }}; font-size: 12px; margin-bottom: 10vh;" id="tabelle_prasenz">
				<thead>
					<tr>
						<th>Name</th>
						<th>Anwesend</th>
						<th>%</th>
					</tr>
				</thead>
				<tbody>
				{% for user in prasenz %}
					<tr>
						<td>{{ user.user }}</td>
						<td>{{ user.anwesend }}</td>
						<td>{{ user.prozent }}</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
		<!-- 5. Topscorer -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<table class="table table-striped" style="color: {{ schriftfarbe or 'white' }}; font-size: 12px; margin-bottom: 10vh;" id="tabelle_skorerpunkte">
				<thead>
					<tr>
						<th>Name</th>
						<th>Tore</th>
						<th>Assists</th>
						<th>Total</th>
					</tr>
				</thead>
				<tbody>
				{% for user in prasenz %}
					<tr>
						<td>{{ user.user }}</td>
						<td>{{ user.tore }}</td>
						<td>{{ user.assists }}</td>
						<td>{{ user.total_punkte }}</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
		<!-- 6. Kasse -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<div class="row">
				<div class="col-12">
					<center>Saldo<br><div style="color: #FFD700;">{{ "{:,.2f}".format(saldo).replace(",", "'") }}</div></center>
				</div>
			</div>
			<div class="row">
				<div class="col-12" style="font-size: 30px; color: {{ schriftfarbe or 'white' }};">
					<center>Offene Beträge</center>
				</div>
				{% for busse in bussen %}
				<div class="col-1"></div>
				<div class="col-6" style="color: {{ schriftfarbe or 'white' }};">
					{{ busse.fullname }}<br>{{ busse.begruendung }}<br>---
				</div>
				<div class="col-3" style="color: {{ schriftfarbe or 'white' }};">
					{{ "{:,.2f}".format(busse.betrag).replace(",", "'") }}
				</div>
				<div class="col-2"></div>
				{% endfor %}
			</div>
			<div class="row" style="margin-bottom: 10vh;">
				<div class="col-12" style="font-size: 30px; color: {{ schriftfarbe or 'white' }};">
					<center>Bussenkatalog</center>
				</div>
				<div class="col-1"></div>
				<div class="col-6" style="color: {{ schriftfarbe or 'white' }};">
					Nicht Abmelden
				</div>
				<div class="col-3" style="color: {{ schriftfarbe or 'white' }};">
					10.-
				</div>
				<div class="col-2"></div>
				<div class="col-1"></div>
				<div class="col-6" style="color: {{ schriftfarbe or 'white' }};">
					Zu Spät
				</div>
				<div class="col-3" style="color: {{ schriftfarbe or 'white' }};">
					5.-
				</div>
				<div class="col-2"></div>
				<div class="col-1"></div>
				<div class="col-6" style="color: {{ schriftfarbe or 'white' }};">
					Matchstrafe
				</div>
				<div class="col-3" style="color: {{ schriftfarbe or 'white' }};">
					20.-
				</div>
				<div class="col-2"></div>
			</div>
		</div>
		<!-- 7. Team -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<center><p><b>Team</b></p><img src="/files/Team.jpg" class="rounded"></center>
			<div class="row">
				{% for user in users %}
					<div class="col-1"></div>
					<div class="col-10" style="background-color: {{ sekundaer_bg }}; border: 5px solid #bbbbbb; border-radius: 25px; padding: 3px; margin-bottom: 5px;">
						<div class="row" style="padding-left: 10px; padding-right: 10px; padding-top: 5px; padding-bottom: 5px;">
							<div class="col-8">
								<strong>{{ user.fullname }}</strong><br>
								{{ user.nummer }} {% if user.captain %}C {% endif %}{{ user.position }}
								{% if team_ansicht == 'Detailiert' %}
									<br>{{ user.strasse }}, {{ user.plz }} {{ user.ort }}<br>
									{{ user.geburtsdatum }}<br>{{ user.telefon }}
								{% endif %}
							</div>
							<div class="col-3">
								{% if user.bild %}
								<img src="{{ user.bild }}" class="rounded">
								{% else %}
								<img src="assets/doppelpass/images/user.png" class="rounded">
								{% endif %}
							</div>
						</div>
					</div>
					<div class="col-1"></div>
				{% endfor %}
			</div>
			<center><b>Trainer</b><br><img src="/files/trainer.jpg" class="rounded" style="margin-bottom: 10vh;"></center>
		</div>
		<!-- 8. Profil -->
		<div class="carousel-item">
			<img src="assets/doppelpass/images/teamplaner_wordmark_transparent.png" class="mx-auto d-block img-fluid" onclick="$('.carousel').carousel(0);">
			<center><p><b>Profil</b></p></center>
			<div class="row">
				<div class="col-2"></div>
				<div class="col-8">
					{% if user.bild %}
					<img src="{{ user.bild }}" class="rounded">
					{% else %}
					<img src="assets/doppelpass/images/user.png" class="rounded">
					{% endif %}
				</div>
				<div class="col-2"></div>
				<div class="col-2"></div>
				<div class="col-8" style="font-size: 30px; color: {{ schriftfarbe or 'white' }};">
					<center>
						{{ user.fullname }}<br>
						{{ user.nummer }}<br>
						{{ user.position }}<br>
						<p style="font-size: small;">
							{% if user.geburtsdatum %}{{ frappe.utils.get_datetime(user.geburtsdatum).strftime('%d.%m.%Y') }}{% else %}Kein Geburtsdatum{% endif %}<br>
							{% if user.strasse %}{{ user.strasse }}{% else %}Keine Strasse{% endif %}<br>
							{% if user.plz > 0 %}{{ user.plz }} {% endif %}{% if user.ort %}{{ user.ort }}{% else %}Kein Ort{% endif %}<br>
							{% if user.telefon %}{{ user.telefon }}{% else %}Keine Telefon-Nummer{% endif %}
						</p>
					</center>
				</div>
				<div class="col-2"></div>
				<div class="col-2"></div>
				<div class="col-8" style="font-size: 30px; color: {{ schriftfarbe or 'white' }};">
					<center>
						<button class="btn" style="color: {{ schriftfarbe or 'white' }};" onclick="window.location='https://github.com/joelios/doppelpass/issues/new';">
							<center>
								<i class="fab fa-github" style="font-size: 2rem;"></i><br>
								Report Issue
							</center>
						</button>
					</center>
				</div>
				<div class="col-2"></div>
			</div>
			<center><p><b>Profil Settings</b></p></center>
			<div class="row" style="margin-bottom: 10vh;">
				<div class="col-2"></div>
				<div class="col-8" style="color: {{ schriftfarbe or 'white' }};">
					<center>
						<form>
							<label for="pimebackgroundcolor">Wähle Deine primäre Hintergrundfarbe:</label>
							<input type="color" id="pimebackgroundcolor" name="pimebackgroundcolor" value="{{ primar_bg }}" onchange="primebackground_change();">
						</form>
						<form>
							<label for="secbackgroundcolor">Wähle Deine sekundäre Hintergrundfarbe:</label>
							<input type="color" id="secbackgroundcolor" name="secbackgroundcolor" value="{{ sekundaer_bg }}" onchange="secbackground_change();">
						</form>
						<form>
							<label for="schriftfarbe">Wähle Deine Schriftfarbe:</label>
							<input type="color" id="schriftfarbe" name="schriftfarbe" value="{{ schriftfarbe }}" onchange="schriftfarbe_change();">
						</form>
						<center>
							<button class="btn" style="color: {{ schriftfarbe or 'white' }};" onclick="reset_colors();">
								<center>
									<b>Farben zurücksetzen</b>
								</center>
							</button>
						</center><br><br>
					</center>
				</div>
				<div class="col-2"></div>
				<div class="col-2"></div>
				<div class="col-8" style="color: {{ schriftfarbe or 'white' }};">
					<center>
						<form>
							<label for="team_ansicht">Wähle die Standardansicht der Team-Liste:</label>
							<select class="form-control" id="team_ansicht" value="{{ team_ansicht }}" onchange="team_ansicht_change();">
								<option value='Einfach' {% if team_ansicht == 'Einfach' %}selected{% endif %}>Einfach</option>
								<option value='Detailiert' {% if team_ansicht == 'Detailiert' %}selected{% endif %}>Detailiert</option>
							</select>
						</form>
					</center>
				</div>
				<div class="col-2"></div>
				<div class="col-2"></div>
				<div class="col-8" style="color: {{ schriftfarbe or 'white' }};">
					<center>
						<form>
							<label for="fullname">Name:</label>
							<input type="text" class="form-control" id="fullname" value="{{ fullname }}">
							<label for="plz">PLZ:</label>
							<input type="text" class="form-control" id="plz" value="{{ plz }}">
							<label for="ort">Ort:</label>
							<input type="text" class="form-control" id="ort" value="{{ ort }}">
							<label for="strasse">Strasse:</label>
							<input type="text" class="form-control" id="strasse" value="{{ strasse }}">
							<label for="telefon">Telefon:</label>
							<input type="text" class="form-control" id="telefon" value="{{ telefon }}">
							<label for="geburtsdatum">Geburtsdatum:</label>
							<input type="date" class="form-control" id="geburtsdatum" value="{{ geburtsdatum }}">
						</form>
						<button class="btn" style="color: {{ schriftfarbe or 'white' }}; font-size: 2rem;" onclick="update_kontakt();"><i class="far fa-save"></i></button>
					</center>
				</div>
				<div class="col-2"></div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block script %}
	<script type="text/javascript" src="//cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
	<script>
		$(document).ready(function () {
			$('#tabelle_skorerpunkte').DataTable({
				"order": [[ 3, "desc" ], [ 1, "desc" ], [ 2, "desc" ], [ 0, "desc" ]],
				"paging":   false,
				"info":     false,
				"searching": false
			});
			$('#tabelle_prasenz').DataTable({
				"order": [[ 2, "desc" ], [ 0, "desc" ]],
				"paging":   false,
				"info":     false,
				"searching": false
			});
		});
		
		function abmelden(ref) {
			frappe.call({
				method: 'doppelpass.www.main_menue.abmelden',
				args: {
					ref: ref
				},
				callback: function(r) {
					if(r.message) {
						location.reload();
					} 
				}
			});
		}

		function anmelden(_event) {
			frappe.call({
				method: 'doppelpass.www.main_menue.anmelden',
				args: {
					'event': _event
				},
				callback: function(r) {
					if(r.message) {
						localStorage.clear();
						location.reload();
					} 
				}
			});
		}
		
		function show_teilnehmer(event) {
			frappe.call({
				method: 'doppelpass.www.main_menue.show_teilnehmer',
				args: {
					event: event
				},
				callback: function(r) {
					if(r.message) {
						console.log(r.message);
						var nachricht = '<table style="width: 100%;"><thead><tr><th>Spieler</th><th>Position</th></thead><tbody>';
						for (var i = 0; i < r.message.length; i++) {
							nachricht += '<tr><td>' + r.message[i][0] + '</td><td>' + r.message[i][1] + '</td></tr>';
						}
						nachricht += '</tbody></table>';
						frappe.msgprint(nachricht, 'Anmeldungen Event');
					} 
				}
			});
		}
		
		function primebackground_change() {
			new_bg = $('#pimebackgroundcolor').val();
			if ((!new_bg)) {
				frappe.msgprint("Bitte tragen Sie eine Farbe ein!", "Fehlende Angaben");
				return
			} else {
				frappe.call({
					method: 'doppelpass.www.main_menue.primebackground_change',
					args: {
						color: new_bg
					},
					callback: function(r) {
						if(r.message) {
							$('#pimebackgroundcolor').val(new_bg);
							location.reload();
						} 
					}
				});
			}
		}

		function secbackground_change() {
			new_bg = $('#secbackgroundcolor').val();
			if ((!new_bg)) {
				frappe.msgprint("Bitte tragen Sie eine Farbe ein!", "Fehlende Angaben");
				return
			} else {
				frappe.call({
					method: 'doppelpass.www.main_menue.secbackground_change',
					args: {
						color: new_bg
					},
					callback: function(r) {
						if(r.message) {
							$('#secbackgroundcolor').val(new_bg);
							location.reload();
						} 
					}
				});
			}
		}
		
		function schriftfarbe_change() {
			new_bg = $('#schriftfarbe').val();
			if ((!new_bg)) {
				frappe.msgprint("Bitte tragen Sie eine Farbe ein!", "Fehlende Angaben");
				return
			} else {
				frappe.call({
					method: 'doppelpass.www.main_menue.schriftfarbe_change',
					args: {
						color: new_bg
					},
					callback: function(r) {
						if(r.message) {
							$('#schriftfarbe').val(new_bg);
							location.reload();
						} 
					}
				});
			}
		}

		function reset_colors() {
			var new_primar = '#47aff8';
			var new_sekundaer = '#3c5c73';
			var new_schriftfarbe = '#ffffff';
			frappe.call({
				method: 'doppelpass.www.main_menue.primebackground_change',
				args: {
					color: new_primar
				},
				callback: function(r) {
					if(r.message) {
						frappe.call({
							method: 'doppelpass.www.main_menue.secbackground_change',
							args: {
								color: new_sekundaer
							},
							callback: function(r) {
								if(r.message) {
									frappe.call({
										method: 'doppelpass.www.main_menue.schriftfarbe_change',
										args: {
											color: new_schriftfarbe
										},
										callback: function(r) {
											if(r.message) {
												$('#pimebackgroundcolor').val(new_primar);
												$('#secbackgroundcolor').val(new_sekundaer);
												$('#schriftfarbe').val(new_schriftfarbe);
												location.reload();
											} 
										}
									});
								}
							}
						});
					} 
				}
			});
		}

		function team_ansicht_change() {
			new_team_ansicht = $('#team_ansicht').val();
			console.log(new_team_ansicht);
			if ((!new_team_ansicht)) {
				frappe.msgprint("Bitte tragen Sie eine Team Ansicht ein!", "Fehlende Angaben");
				return
			} else {
				frappe.call({
					method: 'doppelpass.www.main_menue.team_ansicht_change',
					args: {
						team_ansicht: new_team_ansicht
					},
					callback: function(r) {
						if(r.message) {
							location.reload();
						} 
					}
				});
			}
		}

		function update_kontakt() {
			var fullname = $('#fullname').val();
			var plz = $('#plz').val();
			var telefon = $('#telefon').val();
			var geburtsdatum = $('#geburtsdatum').val();
			var ort = $('#ort').val();
			var strasse =$('#strasse').val();
			frappe.call({
				method: 'doppelpass.www.main_menue.update_kontakt',
				args: {
					fullname: fullname,
					plz: plz,
					telefon: telefon,
					geburtsdatum: geburtsdatum,
					ort: ort,
					strasse: strasse
				},
				callback: function(r) {
					if(r.message) {
						location.reload();
					} 
				}
			});
		}
	</script>
{% endblock %}
